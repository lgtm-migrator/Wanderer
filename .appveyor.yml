image: Visual Studio 2019

before_build:
- nuget restore
- choco install opencover.portable
- choco install codecov

build:
  project: StarshipWanderer.sln
  verbosity: minimal

environment:
    COVERALLS_REPO_TOKEN:  
       secure: bP7KRQj9n04WENG3PpBMorvIMnyEje/3ZdXS4DTVHtjd8WYL3opfkZ6zZmYuQPZa

after_test: 
  - cmd: OpenCover.Console.Exe -target:"c:\program files\dotnet\dotnet.exe" -targetargs:"test" -filter:"+[*Wanderer*]* -[Test]*" -output:coverage.xml -register:user
  - cmd: C:\Users\%APPVEYOR_ACCOUNT_NAME%\.nuget\packages\coveralls.io\1.4.2\tools\coveralls.net.exe --opencover coverage.xml -r %COVERALLS_REPO_TOKEN%